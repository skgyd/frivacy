{% extends 'base.html' %}
{% block content %}
<body>
    {% load static %} <!-- static 파일 불러오기 -->
    <div class="w3-main" style="margin-left:380px; margin-right:80px; width:60%;margin-top:30px; padding-top:10px;">
        <div style="padding-bottom:150px;">
            <div class="box" style="float:left;background: #BDBDBD;width:150px;height:150px;border-radius: 70%;overflow: hidden;">
                <img class="profile" style="width: 100%;height: 100%;object-fit: cover;" src="{% static ProfilePic %}">
            </div>
            <div style="float:left;margin-left:30px;">
                <section>
                    <div style="padding-bottom:10px;">
                    <div id="id"><h3>{{suser.username}}</h3></div>
                    {% if flag %}
                    {% if suser.username != user.username %}
                        <div><button id="follow">팔로우</button></div>
                    {% endif %}
                    {% endif %}
                    </div>
                    <div id="post">게시물 <b>{{cnt}}</b> &nbsp;&nbsp;팔로워 <b>{{fercnt}}</b> &nbsp;&nbsp;팔로우 <b>{{fcnt}}</b></div>
                    <br>
                    <div id="name"><b>{{suser.first_name}}</b></div>
                </section>
            </div>
        </div>
        <hr>
    </div>
    {% for i in posts %}
    <div class="w3-main" style="margin-left:380px; margin-right:80px; width:60%; border:2px solid rgb(241, 236, 236); margin-top:30px; padding-top:10px;">
        <div style="margin-left:20px;">
            <div class="box" style="background: #BDBDBD;width: 40px;height: 40px;border-radius: 70%;overflow: hidden;">
                <img class="profile" style="width: 100%;height: 100%;object-fit: cover;" src="{% static i.ProfilePic %}">
            </div>
            <div>{{i.Owner}}</div>
        </div><br>
        <div align="center"><img src="{% static i.URL %}"></div>
        <div class="content" style="padding:5 5; margin: 20px;">
            <bold>{{i.Owner}}</bold>
            <div>{{i.Content}}</div>
        </div>
        <div class="input-group mb-3" style="background-color: rgb(241, 236, 236); width:100%; padding: 20px;">
            <input type="text" class="underline" placeholder="comment" aria-label="Recipient's username" aria-describedby="button-addon2" style="width:85%; background-color: transparent; margin-left:10px; BORDER-BOTTOM: #00334e 1px solid;BORDER-LEFT: medium none;BORDER-RIGHT: medium none;BORDER-TOP: medium none;">
            <button class="btn btn-outline-secondary" type="submit" style="background-color:rgb(241, 236, 236); border:none; margin-left:30px;">댓글 작성</button>      
        </div>
        <div style="background-color: rgb(241, 236, 236); width:100%; padding: 20px;">
            <a class="btn btn-outline-secondary" href="edit/{{i.PostID }}/" type="button" style="background-color:rgb(241, 236, 236); border:none; margin-left:470px;">수정</a>      
            <a class="btn btn-outline-secondary" href="delete/{{i.PostID }}/" type="button" style="background-color:rgb(241, 236, 236); border:none; margin-left:15px;">삭제</a>      
        </div>
    </div>
    {% endfor %}
</body>
<script src="{% static '/js/jquery.min.js' %}"></script>
<script src="{% static '/js/bootstrap.min.js' %}"></script>
<script src="{% static '/js/django-ajax.js' %}"></script>
<script type="text/javascript">
    $('#follow').click(function() {
            $.ajax({
                type: "GET",
                url: "/followAct/{{suser.username}}",
                processData: false,
                contentType: "application/json",
                data: '',
                success: function(r) {
                        if (JSON.parse(r).Following == true) {
                                $('#follow').html("Following");
                        } else {
                                $('#follow').html("Follow");
                        }
                },
                error: function(r) {

                }
        });
    });
</script>
{% endblock %}
