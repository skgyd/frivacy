{% extends 'base.html' %}
{% block content %}
{% load static %}
<head>
        <div class="w3-main" style="margin-left:340px;margin-right:40px">
            <div class="w3-container" id="services" style="margin-top:75px">
                <h1 class="w3-xlarge " style="color: #00334e;"><b>개인정보 수정 .</b></h1>
                <hr style="width:50px;border:5px solid #00334e" class="w3-round">
            </div>
        </div>  
    </head>  

<body>
     <br>
     <form method="post" action="/modifyAct" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="w3-main" style="margin-left:500px; margin-top:20px;margin-right:80px; height:100%; padding:10px 10px;">
            <div class="box" style="margin:auto;background: #BDBDBD;width: 200px;height: 200px;border-radius: 70%;overflow: hidden;">
                <img class="profile" style="width: 100%;height: 100%;object-fit: cover;" src="{% static ProfilePic %}">
            </div>
            <input type="file" name="image" id="image" style="display:none"/>
            <h4>ID </h4>
            <input type="text" name="id" value="{{ user.username }}" maxlength="10" size="80" placeholder="ID" readonly>
            <br>
            <br>
            <h4>PW </h4>
                <input type="password" name="pw" value="" maxlength="20" size="80" placeholder="PASSWORD">
                <!--<input type="submit" value =" 변경 "  onclick="pw_popup()" style="padding: 6px 6px; margin-right:10px; margin-left:10px; color:dimgrey; background:rgb(243, 243, 243); border: none;">--> 
            <br>
            <br>
            <!--<div id="popup_layer1" style="position: relative; visibility:hidden;"></div>-->
            <h4>PW 확인 </h4> 
                <input type="password" name="pw2" value="" maxlength="20" size="80" placeholder="PASSWORD 확인">
            <br>
            <br>
            <h4>사용자 이름 </h4>
                <input type="text" name="name" value="{{ user.first_name }}" maxlength="30" size="80" placeholder="NAME">
            <br>
            <br>
            <h4>이메일 </h4>
                <input type="text" name="email" value="{{ user.email }}" maxlength="30" size="80" placeholder="EMAIL">
            <br>
            <br>
            <input type="submit" value ="변경하기" style="padding: 6px 6px; margin-right:10px; margin-left:35%; color:rgb(99, 97, 97); background: transparent; border: none;">  
        </div>
    </form>
</body>
<script src="{% static '/js/jquery.min.js' %}"></script>
<script src="{% static '/js/bootstrap.min.js' %}"></script>
<script src="{% static '/js/django-ajax.js' %}"></script>
<script type="text/javascript">
    $(document).ready(function() {
        var err = '{{ error }}'
        console.log(err)
        if(err!=""){
            alert(err)
        }
    });
    function pw_popup(){ 
        var layer = document.getElementById("popup_layer1"); 
        layer.style.visibility="visible"; //반대는 hidden 
    } 
    function fn_layer_popup2(){ 
        var layer = document.getElementById("popup_layer2"); 
        layer.style.visibility="visible"; //반대는 hidden 
    } 
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                $('.profile').attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
    $("#image").change(function() {
        readURL(this);
    });
    $(".profile").click(function() {
        $("#image").click();
    });
</script>

{% endblock %}
